
### amplify application 을 위한 backend 구성

amplify 의 backend는 amplify CLI 를 통해 명령어 기반으로 구성할 수 있습니다. 생성된 backend에 대한 리소스를 모두 코드로 관리하게 되며, 
코드를 기반으로 빠르게 환경 구성이 가능하며 개발자들 사이에서도 공유 및 지속적인 통합과 배포가 가능합니다.


1. amplify init 을 통해서 생성된 amplify 디렉토리 보이는 디렉토리로 이동하여, **amplify status** 명령어를 실행하면, 앞서 **amplify init** 에서 생성된 환경 및 백엔드에 생성되어 있는 리소스를 확인 할 수 있습니다.

    > $ amplify status

    ```
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $ amplify status
    
    Current Environment: dev
    
    | Category | Resource name | Operation | Provider plugin |
    | -------- | ------------- | --------- | --------------- |
    
       
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master)
  
    ```
    > 현재 환경은 dev 이며, 해당 backend 환경에는 생성되어 있는 리소스가 없는 것을 확인 할 수 있습니다.

2. backend 의 리소스는 필요에 따라 인증을 필요로 합니다. 인증을 위한 Cognito UserPool 을 추가해 보도록 합니다. 

    > $ amplify add auth 
    
    ```
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $ amplify add auth
    Using service: Cognito, provided by: awscloudformation
    
    The current configured provider is Amazon Cognito.
    
    Do you want to use the default authentication and security configuration? Default configuration
    Warning: you will not be able to edit these selections.
    How do you want users to be able to sign in? Username
    Do you want to configure advanced settings? No, I am done.
    
    Successfully added resource awsserverlessecommer5950043a locally
    
    Some next steps:
    "amplify push" will build all your local backend resources and provision it in the cloud
    "amplify publish" will build all your local backend and frontend resources (if you have hosting category added) and provision it in the cloud
    
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $
    ```
    > - How do you want users to be able to sign in 에서 "Username" 
    > - Do you want to configure advanced settings? 에서 "No" 을 선택

    위와 같이 설정을 끝내면, Local 환경에서 위 리소스를 생성하기 위한 cloudformation template 이 생성됩니다. (amplify/backend/auth)

3. 다음로 backend 환경에서 graphQL API 를 생성 합니다. 

   > $ amplify add api
    ```
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $ amplify add api
    ? Please select from one of the below mentioned services: GraphQL
    ? Provide API name: ecommerce
    ? Choose the default authorization type for the API Amazon Cognito User Pool
    Use a Cognito user pool configured as a part of this project.
    ? Do you want to configure advanced settings for the GraphQL API No, I am done.
    ? Do you have an annotated GraphQL schema? No
    ? Do you want a guided schema creation? Yes
    ? What best describes your project: Single object with fields (e.g., “Todo” with ID, name, description)
    ? Do you want to edit the schema now? No
    
    The following types do not have '@auth' enabled. Consider using @auth with @model
             - Todo
    Learn more about @auth here: https://aws-amplify.github.io/docs/cli-toolchain/graphql#auth
    
    
    GraphQL schema compiled successfully.
    
    Edit your schema at /home/ubuntu/environment/aws-serverless-ecommerce-front-store/amplify/backend/api/ecommerce/schema.graphql or place .graphql files in a directory at /home/ubuntu/environment/aws-serverless-ecommerce-front-store/amplify/backend/api/ecommerce/schema
    Successfully added resource ecommerce locally
    
    Some next steps:
    "amplify push" will build all your local backend resources and provision it in the cloud
    "amplify publish" will build all your local backend and frontend resources (if you have hosting category added) and provision it in the cloud
    
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $
    ```


4. chekc status

    ```
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $ amplify status

    Current Environment: dev
    
    | Category | Resource name                | Operation | Provider plugin   |
    | -------- | ---------------------------- | --------- | ----------------- |
    | Auth     | awsserverlessecommer5950043a | Create    | awscloudformation |
    | Api      | ecommerce                    | Create    | awscloudformation |
    
    
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $ 
    ```
    
5. amplify push
    
    ```
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $ amplify push
    ✔ Successfully pulled backend environment dev from the cloud.
    
    Current Environment: dev
    
    | Category | Resource name                | Operation | Provider plugin   |
    | -------- | ---------------------------- | --------- | ----------------- |
    | Auth     | awsserverlessecommer5950043a | Create    | awscloudformation |
    | Api      | ecommerce                    | Create    | awscloudformation |
    ? Are you sure you want to continue? Yes
    
    The following types do not have '@auth' enabled. Consider using @auth with @model
             - Todo
    Learn more about @auth here: https://aws-amplify.github.io/docs/cli-toolchain/graphql#auth
    
    
    GraphQL schema compiled successfully.
    
    Edit your schema at /home/ubuntu/environment/aws-serverless-ecommerce-front-store/amplify/backend/api/ecommerce/schema.graphql or place .graphql files in a directory at /home/ubuntu/environment/aws-serverless-ecommerce-front-store/amplify/backend/api/ecommerce/schema
    ? Do you want to generate code for your newly created GraphQL API Yes
    ? Choose the code generation language target javascript
    ? Enter the file name pattern of graphql queries, mutations and subscriptions src/graphql/**/*.js
    ? Do you want to generate/update all possible GraphQL operations - queries, mutations and subscriptions Yes
    ? Enter maximum statement depth [increase from default if your schema is deeply nested] 2
    ⠏ Updating resources in the cloud. This may take a few minutes...
    
    UPDATE_IN_PROGRESS amplify-awsserverlessecommer-dev-71218 AWS::CloudFormation::Stack Wed Feb 26 2020 02:03:19 GMT+0000 (Coordinated Universal Time) User Initiated
    CREATE_IN_PROGRESS authawsserverlessecommer5950043a       AWS::CloudFormation::Stack Wed Feb 26 2020 02:03:24 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS UpdateRolesWithIDPFunctionRole         AWS::IAM::Role             Wed Feb 26 2020 02:03:24 GMT+0000 (Coordinated Universal Time)
    ⠙ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS authawsserverlessecommer5950043a AWS::CloudFormation::Stack Wed Feb 26 2020 02:03:25 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_IN_PROGRESS UpdateRolesWithIDPFunctionRole   AWS::IAM::Role             Wed Feb 26 2020 02:03:26 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠹ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS amplify-awsserverlessecommer-dev-71218-authawsserverlessecommer5950043a-1BOM0BQKE4YK4 AWS::CloudFormation::Stack Wed Feb 26 2020 02:03:25 GMT+0000 (Coordinated Universal Time) User Initiated
    ⠼ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS SNSRole AWS::IAM::Role Wed Feb 26 2020 02:03:30 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS SNSRole AWS::IAM::Role Wed Feb 26 2020 02:03:32 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠋ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE UpdateRolesWithIDPFunctionRole AWS::IAM::Role Wed Feb 26 2020 02:03:45 GMT+0000 (Coordinated Universal Time)
    ⠸ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE SNSRole AWS::IAM::Role Wed Feb 26 2020 02:03:52 GMT+0000 (Coordinated Universal Time)
    ⠴ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UserPool AWS::Cognito::UserPool Wed Feb 26 2020 02:03:56 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS UserPool AWS::Cognito::UserPool Wed Feb 26 2020 02:03:58 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    UserPool AWS::Cognito::UserPool Wed Feb 26 2020 02:03:58 GMT+0000 (Coordinated Universal Time)
    ⠇ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UserPoolClientWeb AWS::Cognito::UserPoolClient Wed Feb 26 2020 02:04:01 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS UserPoolClient    AWS::Cognito::UserPoolClient Wed Feb 26 2020 02:04:01 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS UserPoolClientWeb AWS::Cognito::UserPoolClient Wed Feb 26 2020 02:04:03 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    UserPoolClientWeb AWS::Cognito::UserPoolClient Wed Feb 26 2020 02:04:03 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS UserPoolClient    AWS::Cognito::UserPoolClient Wed Feb 26 2020 02:04:03 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    UserPoolClient    AWS::Cognito::UserPoolClient Wed Feb 26 2020 02:04:03 GMT+0000 (Coordinated Universal Time)
    ⠋ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UserPoolClientRole AWS::IAM::Role Wed Feb 26 2020 02:04:07 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS UserPoolClientRole AWS::IAM::Role Wed Feb 26 2020 02:04:08 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠏ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE    UserPoolClientRole   AWS::IAM::Role        Wed Feb 26 2020 02:04:26 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS UserPoolClientLambda AWS::Lambda::Function Wed Feb 26 2020 02:04:29 GMT+0000 (Coordinated Universal Time)
    ⠙ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UserPoolClientLambda AWS::Lambda::Function Wed Feb 26 2020 02:04:30 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠙ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE    UserPoolClientLambda       AWS::Lambda::Function Wed Feb 26 2020 02:04:30 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS UserPoolClientLambdaPolicy AWS::IAM::Policy      Wed Feb 26 2020 02:04:33 GMT+0000 (Coordinated Universal Time)
    ⠼ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UserPoolClientLambdaPolicy AWS::IAM::Policy Wed Feb 26 2020 02:04:35 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠋ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE UserPoolClientLambdaPolicy AWS::IAM::Policy Wed Feb 26 2020 02:04:53 GMT+0000 (Coordinated Universal Time)
    ⠸ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UserPoolClientLogPolicy AWS::IAM::Policy Wed Feb 26 2020 02:04:56 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS UserPoolClientLogPolicy AWS::IAM::Policy Wed Feb 26 2020 02:04:57 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠋ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE UserPoolClientLogPolicy AWS::IAM::Policy Wed Feb 26 2020 02:05:14 GMT+0000 (Coordinated Universal Time)
    ⠹ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UserPoolClientInputs Custom::LambdaCallout Wed Feb 26 2020 02:05:17 GMT+0000 (Coordinated Universal Time)
    ⠼ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UserPoolClientInputs Custom::LambdaCallout      Wed Feb 26 2020 02:05:20 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    UserPoolClientInputs Custom::LambdaCallout      Wed Feb 26 2020 02:05:21 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS IdentityPool         AWS::Cognito::IdentityPool Wed Feb 26 2020 02:05:24 GMT+0000 (Coordinated Universal Time)
    ⠦ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS IdentityPool        AWS::Cognito::IdentityPool               Wed Feb 26 2020 02:05:25 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    IdentityPool        AWS::Cognito::IdentityPool               Wed Feb 26 2020 02:05:26 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS IdentityPoolRoleMap AWS::Cognito::IdentityPoolRoleAttachment Wed Feb 26 2020 02:05:29 GMT+0000 (Coordinated Universal Time)
    ⠏ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS IdentityPoolRoleMap                                                                   AWS::Cognito::IdentityPoolRoleAttachment Wed Feb 26 2020 02:05:31 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    IdentityPoolRoleMap                                                                   AWS::Cognito::IdentityPoolRoleAttachment Wed Feb 26 2020 02:05:31 GMT+0000 (Coordinated Universal Time)
    CREATE_COMPLETE    amplify-awsserverlessecommer-dev-71218-authawsserverlessecommer5950043a-1BOM0BQKE4YK4 AWS::CloudFormation::Stack               Wed Feb 26 2020 02:05:33 GMT+0000 (Coordinated Universal Time)
    ⠹ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE    authawsserverlessecommer5950043a AWS::CloudFormation::Stack Wed Feb 26 2020 02:05:40 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS apiecommerce                     AWS::CloudFormation::Stack Wed Feb 26 2020 02:05:42 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS UpdateRolesWithIDPFunction       AWS::Lambda::Function      Wed Feb 26 2020 02:05:42 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS UpdateRolesWithIDPFunction       AWS::Lambda::Function      Wed Feb 26 2020 02:05:43 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_IN_PROGRESS apiecommerce                     AWS::CloudFormation::Stack Wed Feb 26 2020 02:05:43 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    UpdateRolesWithIDPFunction       AWS::Lambda::Function      Wed Feb 26 2020 02:05:43 GMT+0000 (Coordinated Universal Time)
    ⠼ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS amplify-awsserverlessecommer-dev-71218-apiecommerce-C9LXQQZ9F6Y6 AWS::CloudFormation::Stack Wed Feb 26 2020 02:05:43 GMT+0000 (Coordinated Universal Time) User Initiated
    ⠼ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UpdateRolesWithIDPFunctionOutputs Custom::LambdaCallout Wed Feb 26 2020 02:05:45 GMT+0000 (Coordinated Universal Time)
    ⠦ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UpdateRolesWithIDPFunctionOutputs Custom::LambdaCallout Wed Feb 26 2020 02:05:49 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠧ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS GraphQLAPI AWS::AppSync::GraphQLApi Wed Feb 26 2020 02:05:47 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS GraphQLAPI AWS::AppSync::GraphQLApi Wed Feb 26 2020 02:05:49 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    GraphQLAPI AWS::AppSync::GraphQLApi Wed Feb 26 2020 02:05:50 GMT+0000 (Coordinated Universal Time)
    ⠧ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE UpdateRolesWithIDPFunctionOutputs Custom::LambdaCallout Wed Feb 26 2020 02:05:50 GMT+0000 (Coordinated Universal Time)
    ⠏ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS GraphQLSchema AWS::AppSync::GraphQLSchema Wed Feb 26 2020 02:05:52 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS GraphQLSchema AWS::AppSync::GraphQLSchema Wed Feb 26 2020 02:05:55 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠏ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE    GraphQLSchema AWS::AppSync::GraphQLSchema Wed Feb 26 2020 02:06:56 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS Todo          AWS::CloudFormation::Stack  Wed Feb 26 2020 02:06:58 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS Todo          AWS::CloudFormation::Stack  Wed Feb 26 2020 02:06:59 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠋ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS amplify-awsserverlessecommer-dev-71218-apiecommerce-C9LXQQZ9F6Y6-Todo-4D8LS113WRXL AWS::CloudFormation::Stack Wed Feb 26 2020 02:06:59 GMT+0000 (Coordinated Universal Time) User Initiated
    ⠸ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS TodoTable   AWS::DynamoDB::Table Wed Feb 26 2020 02:07:04 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS TodoIAMRole AWS::IAM::Role       Wed Feb 26 2020 02:07:04 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS TodoTable   AWS::DynamoDB::Table Wed Feb 26 2020 02:07:04 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠴ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS TodoIAMRole AWS::IAM::Role Wed Feb 26 2020 02:07:05 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠼ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE TodoIAMRole AWS::IAM::Role Wed Feb 26 2020 02:07:25 GMT+0000 (Coordinated Universal Time)
    ⠼ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS TodoDataSource AWS::AppSync::DataSource Wed Feb 26 2020 02:07:28 GMT+0000 (Coordinated Universal Time)
    ⠧ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS TodoDataSource     AWS::AppSync::DataSource Wed Feb 26 2020 02:07:30 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    TodoDataSource     AWS::AppSync::DataSource Wed Feb 26 2020 02:07:30 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS CreateTodoResolver AWS::AppSync::Resolver   Wed Feb 26 2020 02:07:32 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS UpdateTodoResolver AWS::AppSync::Resolver   Wed Feb 26 2020 02:07:32 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS ListTodoResolver   AWS::AppSync::Resolver   Wed Feb 26 2020 02:07:32 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS GetTodoResolver    AWS::AppSync::Resolver   Wed Feb 26 2020 02:07:33 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS DeleteTodoResolver AWS::AppSync::Resolver   Wed Feb 26 2020 02:07:33 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS UpdateTodoResolver AWS::AppSync::Resolver   Wed Feb 26 2020 02:07:34 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    UpdateTodoResolver AWS::AppSync::Resolver   Wed Feb 26 2020 02:07:35 GMT+0000 (Coordinated Universal Time)
    ⠏ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE    TodoTable                                                                          AWS::DynamoDB::Table       Wed Feb 26 2020 02:07:35 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS GetTodoResolver                                                                    AWS::AppSync::Resolver     Wed Feb 26 2020 02:07:35 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    GetTodoResolver                                                                    AWS::AppSync::Resolver     Wed Feb 26 2020 02:07:36 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS ListTodoResolver                                                                   AWS::AppSync::Resolver     Wed Feb 26 2020 02:07:36 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    ListTodoResolver                                                                   AWS::AppSync::Resolver     Wed Feb 26 2020 02:07:36 GMT+0000 (Coordinated Universal Time)
    CREATE_IN_PROGRESS CreateTodoResolver                                                                 AWS::AppSync::Resolver     Wed Feb 26 2020 02:07:36 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    CreateTodoResolver                                                                 AWS::AppSync::Resolver     Wed Feb 26 2020 02:07:36 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS DeleteTodoResolver                                                                 AWS::AppSync::Resolver     Wed Feb 26 2020 02:07:36 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    DeleteTodoResolver                                                                 AWS::AppSync::Resolver     Wed Feb 26 2020 02:07:36 GMT+0000 (Coordinated Universal Time)                            
    CREATE_COMPLETE    amplify-awsserverlessecommer-dev-71218-apiecommerce-C9LXQQZ9F6Y6-Todo-4D8LS113WRXL AWS::CloudFormation::Stack Wed Feb 26 2020 02:07:39 GMT+0000 (Coordinated Universal Time)                            
    ⠹ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE    Todo                AWS::CloudFormation::Stack Wed Feb 26 2020 02:07:46 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS CustomResourcesjson AWS::CloudFormation::Stack Wed Feb 26 2020 02:07:48 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS CustomResourcesjson AWS::CloudFormation::Stack Wed Feb 26 2020 02:07:49 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠼ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS amplify-awsserverlessecommer-dev-71218-apiecommerce-C9LXQQZ9F6Y6-CustomResourcesjson-1XJMNGT2IW31K AWS::CloudFormation::Stack Wed Feb 26 2020 02:07:48 GMT+0000 (Coordinated Universal Time) User Initiated
    ⠧ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE amplify-awsserverlessecommer-dev-71218-apiecommerce-C9LXQQZ9F6Y6-CustomResourcesjson-1XJMNGT2IW31K AWS::CloudFormation::Stack Wed Feb 26 2020 02:07:52 GMT+0000 (Coordinated Universal Time) 
    ⠦ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE CustomResourcesjson AWS::CloudFormation::Stack Wed Feb 26 2020 02:07:59 GMT+0000 (Coordinated Universal Time) 
    ⠇ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE amplify-awsserverlessecommer-dev-71218-apiecommerce-C9LXQQZ9F6Y6 AWS::CloudFormation::Stack Wed Feb 26 2020 02:08:01 GMT+0000 (Coordinated Universal Time) 
    ⠴ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE                     apiecommerce                           AWS::CloudFormation::Stack Wed Feb 26 2020 02:08:21 GMT+0000 (Coordinated Universal Time) 
    UPDATE_COMPLETE_CLEANUP_IN_PROGRESS amplify-awsserverlessecommer-dev-71218 AWS::CloudFormation::Stack Wed Feb 26 2020 02:08:24 GMT+0000 (Coordinated Universal Time) 
    UPDATE_COMPLETE                     amplify-awsserverlessecommer-dev-71218 AWS::CloudFormation::Stack Wed Feb 26 2020 02:08:24 GMT+0000 (Coordinated Universal Time) 
    ✔ Generated GraphQL operations successfully and saved at src/graphql
    ✔ All resources are updated in the cloud
    
    GraphQL endpoint: https://y7vkvuat2naupomtvicbskcd7u.appsync-api.ap-northeast-2.amazonaws.com/graphql
    
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $ 
    
    ```

6. amplify status

    ```
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $ amplify status

    Current Environment: dev
    
    | Category | Resource name                | Operation | Provider plugin   |
    | -------- | ---------------------------- | --------- | ----------------- |
    | Auth     | awsserverlessecommer5950043a | No Change | awscloudformation |
    | Api      | ecommerce                    | No Change | awscloudformation |
    
    GraphQL endpoint: https://y7vkvuat2naupomtvicbskcd7u.appsync-api.ap-northeast-2.amazonaws.com/graphql
    
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $
    
    ```
    
7. checkout another environment and see status
    
    ```
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $ amplify env checkout prod
    ✔ Initialized provider successfully.
    Initialized your environment successfully.
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $ amplify status
    
    Current Environment: prod
    
    | Category | Resource name                | Operation | Provider plugin   |
    | -------- | ---------------------------- | --------- | ----------------- |
    | Auth     | awsserverlessecommer5950043a | Create    | awscloudformation |
    | Api      | ecommerce                    | Create    | awscloudformation |
    
    
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $ 
    ```

8. amplify push

    ```
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $ amplify push
    ✔ Successfully pulled backend environment prod from the cloud.
    
    Current Environment: prod
    
    | Category | Resource name                | Operation | Provider plugin   |
    | -------- | ---------------------------- | --------- | ----------------- |
    | Auth     | awsserverlessecommer5950043a | Create    | awscloudformation |
    | Api      | ecommerce                    | Create    | awscloudformation |
    ? Are you sure you want to continue? Yes
    
    The following types do not have '@auth' enabled. Consider using @auth with @model
             - Todo
    Learn more about @auth here: https://aws-amplify.github.io/docs/cli-toolchain/graphql#auth 
    
    
    GraphQL schema compiled successfully.
    
    Edit your schema at /home/ubuntu/environment/aws-serverless-ecommerce-front-store/amplify/backend/api/ecommerce/schema.graphql or place .graphql files in a directory at /home/ubuntu/environment/aws-serverless-ecommerce-front-store/amplify/backend/api/ecommerce/schema
    ? Do you want to update code for your updated GraphQL API No
    ⠇ Updating resources in the cloud. This may take a few minutes...
    
    UPDATE_IN_PROGRESS amplify-awsserverlessecommer-prod-10048 AWS::CloudFormation::Stack Wed Feb 26 2020 02:25:01 GMT+0000 (Coordinated Universal Time) User Initiated
    ⠋ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS authawsserverlessecommer5950043a AWS::CloudFormation::Stack Wed Feb 26 2020 02:25:07 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS UpdateRolesWithIDPFunctionRole   AWS::IAM::Role             Wed Feb 26 2020 02:25:07 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS authawsserverlessecommer5950043a AWS::CloudFormation::Stack Wed Feb 26 2020 02:25:08 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_IN_PROGRESS UpdateRolesWithIDPFunctionRole   AWS::IAM::Role             Wed Feb 26 2020 02:25:08 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠙ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS amplify-awsserverlessecommer-prod-10048-authawsserverlessecommer5950043a-M4PMLFK8UB63 AWS::CloudFormation::Stack Wed Feb 26 2020 02:25:08 GMT+0000 (Coordinated Universal Time) User Initiated
    ⠸ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS SNSRole AWS::IAM::Role Wed Feb 26 2020 02:25:13 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS SNSRole AWS::IAM::Role Wed Feb 26 2020 02:25:15 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠋ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE UpdateRolesWithIDPFunctionRole AWS::IAM::Role Wed Feb 26 2020 02:25:27 GMT+0000 (Coordinated Universal Time) 
    ⠸ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE SNSRole AWS::IAM::Role Wed Feb 26 2020 02:25:33 GMT+0000 (Coordinated Universal Time) 
    ⠴ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UserPool          AWS::Cognito::UserPool       Wed Feb 26 2020 02:25:37 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS UserPool          AWS::Cognito::UserPool       Wed Feb 26 2020 02:25:39 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    UserPool          AWS::Cognito::UserPool       Wed Feb 26 2020 02:25:39 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS UserPoolClientWeb AWS::Cognito::UserPoolClient Wed Feb 26 2020 02:25:42 GMT+0000 (Coordinated Universal Time)                            
    ⠧ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UserPoolClient    AWS::Cognito::UserPoolClient Wed Feb 26 2020 02:25:42 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS UserPoolClientWeb AWS::Cognito::UserPoolClient Wed Feb 26 2020 02:25:43 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    UserPoolClientWeb AWS::Cognito::UserPoolClient Wed Feb 26 2020 02:25:43 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS UserPoolClient    AWS::Cognito::UserPoolClient Wed Feb 26 2020 02:25:44 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    UserPoolClient    AWS::Cognito::UserPoolClient Wed Feb 26 2020 02:25:44 GMT+0000 (Coordinated Universal Time)                            
    ⠋ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UserPoolClientRole AWS::IAM::Role Wed Feb 26 2020 02:25:47 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS UserPoolClientRole AWS::IAM::Role Wed Feb 26 2020 02:25:49 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠏ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE UserPoolClientRole AWS::IAM::Role Wed Feb 26 2020 02:26:06 GMT+0000 (Coordinated Universal Time) 
    ⠏ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UserPoolClientLambda AWS::Lambda::Function Wed Feb 26 2020 02:26:10 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS UserPoolClientLambda AWS::Lambda::Function Wed Feb 26 2020 02:26:11 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    UserPoolClientLambda AWS::Lambda::Function Wed Feb 26 2020 02:26:11 GMT+0000 (Coordinated Universal Time)                            
    ⠙ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UserPoolClientLambdaPolicy AWS::IAM::Policy Wed Feb 26 2020 02:26:15 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS UserPoolClientLambdaPolicy AWS::IAM::Policy Wed Feb 26 2020 02:26:16 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠋ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE    UserPoolClientLambdaPolicy AWS::IAM::Policy Wed Feb 26 2020 02:26:32 GMT+0000 (Coordinated Universal Time) 
    CREATE_IN_PROGRESS UserPoolClientLogPolicy    AWS::IAM::Policy Wed Feb 26 2020 02:26:35 GMT+0000 (Coordinated Universal Time) 
    ⠸ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UserPoolClientLogPolicy AWS::IAM::Policy Wed Feb 26 2020 02:26:37 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠋ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE    UserPoolClientLogPolicy AWS::IAM::Policy      Wed Feb 26 2020 02:26:53 GMT+0000 (Coordinated Universal Time) 
    CREATE_IN_PROGRESS UserPoolClientInputs    Custom::LambdaCallout Wed Feb 26 2020 02:26:56 GMT+0000 (Coordinated Universal Time) 
    ⠹ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UserPoolClientInputs Custom::LambdaCallout Wed Feb 26 2020 02:27:00 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    UserPoolClientInputs Custom::LambdaCallout Wed Feb 26 2020 02:27:00 GMT+0000 (Coordinated Universal Time)                            
    ⠼ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS IdentityPool AWS::Cognito::IdentityPool Wed Feb 26 2020 02:27:03 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS IdentityPool AWS::Cognito::IdentityPool Wed Feb 26 2020 02:27:04 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    IdentityPool AWS::Cognito::IdentityPool Wed Feb 26 2020 02:27:05 GMT+0000 (Coordinated Universal Time)                            
    ⠧ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS IdentityPoolRoleMap AWS::Cognito::IdentityPoolRoleAttachment Wed Feb 26 2020 02:27:09 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS IdentityPoolRoleMap AWS::Cognito::IdentityPoolRoleAttachment Wed Feb 26 2020 02:27:10 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    IdentityPoolRoleMap AWS::Cognito::IdentityPoolRoleAttachment Wed Feb 26 2020 02:27:10 GMT+0000 (Coordinated Universal Time)                            
    ⠏ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE amplify-awsserverlessecommer-prod-10048-authawsserverlessecommer5950043a-M4PMLFK8UB63 AWS::CloudFormation::Stack Wed Feb 26 2020 02:27:13 GMT+0000 (Coordinated Universal Time) 
    ⠸ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE    authawsserverlessecommer5950043a AWS::CloudFormation::Stack Wed Feb 26 2020 02:27:23 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS apiecommerce                     AWS::CloudFormation::Stack Wed Feb 26 2020 02:27:25 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS UpdateRolesWithIDPFunction       AWS::Lambda::Function      Wed Feb 26 2020 02:27:26 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS UpdateRolesWithIDPFunction       AWS::Lambda::Function      Wed Feb 26 2020 02:27:26 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_IN_PROGRESS apiecommerce                     AWS::CloudFormation::Stack Wed Feb 26 2020 02:27:26 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠼ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS amplify-awsserverlessecommer-prod-10048-apiecommerce-K3HEK6EE5YEB AWS::CloudFormation::Stack Wed Feb 26 2020 02:27:26 GMT+0000 (Coordinated Universal Time) User Initiated
    ⠴ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE    UpdateRolesWithIDPFunction        AWS::Lambda::Function Wed Feb 26 2020 02:27:27 GMT+0000 (Coordinated Universal Time) 
    CREATE_IN_PROGRESS UpdateRolesWithIDPFunctionOutputs Custom::LambdaCallout Wed Feb 26 2020 02:27:29 GMT+0000 (Coordinated Universal Time) 
    ⠧ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS GraphQLAPI AWS::AppSync::GraphQLApi Wed Feb 26 2020 02:27:30 GMT+0000 (Coordinated Universal Time) 
    ⠧ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS UpdateRolesWithIDPFunctionOutputs Custom::LambdaCallout Wed Feb 26 2020 02:27:33 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    UpdateRolesWithIDPFunctionOutputs Custom::LambdaCallout Wed Feb 26 2020 02:27:33 GMT+0000 (Coordinated Universal Time)                            
    ⠏ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS GraphQLAPI    AWS::AppSync::GraphQLApi    Wed Feb 26 2020 02:27:32 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    GraphQLAPI    AWS::AppSync::GraphQLApi    Wed Feb 26 2020 02:27:32 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS GraphQLSchema AWS::AppSync::GraphQLSchema Wed Feb 26 2020 02:27:34 GMT+0000 (Coordinated Universal Time)                            
    ⠹ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS GraphQLSchema AWS::AppSync::GraphQLSchema Wed Feb 26 2020 02:27:37 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠋ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE    GraphQLSchema AWS::AppSync::GraphQLSchema Wed Feb 26 2020 02:28:38 GMT+0000 (Coordinated Universal Time) 
    CREATE_IN_PROGRESS Todo          AWS::CloudFormation::Stack  Wed Feb 26 2020 02:28:40 GMT+0000 (Coordinated Universal Time) 
    ⠹ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS Todo AWS::CloudFormation::Stack Wed Feb 26 2020 02:28:42 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠸ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS amplify-awsserverlessecommer-prod-10048-apiecommerce-K3HEK6EE5YEB-Todo-1F77Q9OCE1GQS AWS::CloudFormation::Stack Wed Feb 26 2020 02:28:42 GMT+0000 (Coordinated Universal Time) User Initiated
    ⠴ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS TodoIAMRole AWS::IAM::Role       Wed Feb 26 2020 02:28:47 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS TodoTable   AWS::DynamoDB::Table Wed Feb 26 2020 02:28:47 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS TodoTable   AWS::DynamoDB::Table Wed Feb 26 2020 02:28:48 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_IN_PROGRESS TodoIAMRole AWS::IAM::Role       Wed Feb 26 2020 02:28:49 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠴ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE    TodoIAMRole    AWS::IAM::Role           Wed Feb 26 2020 02:29:07 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS TodoDataSource AWS::AppSync::DataSource Wed Feb 26 2020 02:29:10 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS TodoDataSource AWS::AppSync::DataSource Wed Feb 26 2020 02:29:12 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠧ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE    TodoDataSource     AWS::AppSync::DataSource Wed Feb 26 2020 02:29:12 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS ListTodoResolver   AWS::AppSync::Resolver   Wed Feb 26 2020 02:29:14 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS UpdateTodoResolver AWS::AppSync::Resolver   Wed Feb 26 2020 02:29:14 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS GetTodoResolver    AWS::AppSync::Resolver   Wed Feb 26 2020 02:29:14 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS CreateTodoResolver AWS::AppSync::Resolver   Wed Feb 26 2020 02:29:14 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS DeleteTodoResolver AWS::AppSync::Resolver   Wed Feb 26 2020 02:29:15 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS UpdateTodoResolver AWS::AppSync::Resolver   Wed Feb 26 2020 02:29:16 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    UpdateTodoResolver AWS::AppSync::Resolver   Wed Feb 26 2020 02:29:16 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS GetTodoResolver    AWS::AppSync::Resolver   Wed Feb 26 2020 02:29:17 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠋ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE    GetTodoResolver                                                                      AWS::AppSync::Resolver     Wed Feb 26 2020 02:29:17 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS ListTodoResolver                                                                     AWS::AppSync::Resolver     Wed Feb 26 2020 02:29:17 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_IN_PROGRESS CreateTodoResolver                                                                   AWS::AppSync::Resolver     Wed Feb 26 2020 02:29:17 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    ListTodoResolver                                                                     AWS::AppSync::Resolver     Wed Feb 26 2020 02:29:17 GMT+0000 (Coordinated Universal Time)                            
    CREATE_COMPLETE    CreateTodoResolver                                                                   AWS::AppSync::Resolver     Wed Feb 26 2020 02:29:17 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS DeleteTodoResolver                                                                   AWS::AppSync::Resolver     Wed Feb 26 2020 02:29:18 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_COMPLETE    DeleteTodoResolver                                                                   AWS::AppSync::Resolver     Wed Feb 26 2020 02:29:18 GMT+0000 (Coordinated Universal Time)                            
    CREATE_COMPLETE    TodoTable                                                                            AWS::DynamoDB::Table       Wed Feb 26 2020 02:29:18 GMT+0000 (Coordinated Universal Time)                            
    CREATE_COMPLETE    amplify-awsserverlessecommer-prod-10048-apiecommerce-K3HEK6EE5YEB-Todo-1F77Q9OCE1GQS AWS::CloudFormation::Stack Wed Feb 26 2020 02:29:21 GMT+0000 (Coordinated Universal Time)                            
    ⠼ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE    Todo                AWS::CloudFormation::Stack Wed Feb 26 2020 02:29:29 GMT+0000 (Coordinated Universal Time) 
    CREATE_IN_PROGRESS CustomResourcesjson AWS::CloudFormation::Stack Wed Feb 26 2020 02:29:31 GMT+0000 (Coordinated Universal Time) 
    ⠼ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS CustomResourcesjson AWS::CloudFormation::Stack Wed Feb 26 2020 02:29:32 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠴ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_IN_PROGRESS amplify-awsserverlessecommer-prod-10048-apiecommerce-K3HEK6EE5YEB-CustomResourcesjson-S6JALK4Z9GAG AWS::CloudFormation::Stack Wed Feb 26 2020 02:29:32 GMT+0000 (Coordinated Universal Time) User Initiated
    CREATE_COMPLETE    amplify-awsserverlessecommer-prod-10048-apiecommerce-K3HEK6EE5YEB-CustomResourcesjson-S6JALK4Z9GAG AWS::CloudFormation::Stack Wed Feb 26 2020 02:29:35 GMT+0000 (Coordinated Universal Time)               
    ⠏ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE CustomResourcesjson                                               AWS::CloudFormation::Stack Wed Feb 26 2020 02:29:43 GMT+0000 (Coordinated Universal Time) 
    CREATE_COMPLETE amplify-awsserverlessecommer-prod-10048-apiecommerce-K3HEK6EE5YEB AWS::CloudFormation::Stack Wed Feb 26 2020 02:29:45 GMT+0000 (Coordinated Universal Time) 
    ⠦ Updating resources in the cloud. This may take a few minutes...
    
    CREATE_COMPLETE apiecommerce AWS::CloudFormation::Stack Wed Feb 26 2020 02:30:05 GMT+0000 (Coordinated Universal Time) 
    ⠇ Updating resources in the cloud. This may take a few minutes...
    
    UPDATE_COMPLETE_CLEANUP_IN_PROGRESS amplify-awsserverlessecommer-prod-10048 AWS::CloudFormation::Stack Wed Feb 26 2020 02:30:08 GMT+0000 (Coordinated Universal Time) 
    UPDATE_COMPLETE                     amplify-awsserverlessecommer-prod-10048 AWS::CloudFormation::Stack Wed Feb 26 2020 02:30:09 GMT+0000 (Coordinated Universal Time) 
    ✔ All resources are updated in the cloud
    
    GraphQL endpoint: https://vd2gsg4hjzbwno33mvzhkewxze.appsync-api.ap-northeast-2.amazonaws.com/graphql
    
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $ 

    ```

## 멀티 백엔드(backend) 구성


1. 먼저, **amplify status** 명령으로 현재 환경을 확인 한다. 현재 환경은 dev로 확인되고 있으며, 생성된 백엔드 리소스는 없는 것으로 확인이 된다.
  
    ```
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $ amplify status
    Current Environment: dev
    
    | Category | Resource name | Operation | Provider plugin |
    | -------- | ------------- | --------- | --------------- |
    
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $
    
    ```

2. 새로운 환경을 추가 한다.( **amplify env add <환경이름>** ), 아래는 Pro 이라는 새로운 환경을 추가 하는 예제이다.
    
    ```
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $ amplify env add
    Note: It is recommended to run this command from the root of your app directory
    ? Do you want to use an existing environment? No
    ? Enter a name for the environment prod
    Using default provider  awscloudformation
    
    For more information on AWS Profiles, see:
    https://docs.aws.amazon.com/cli/latest/userguide/cli-multiple-profiles.html
    
    ? Do you want to use an AWS profile? Yes
    ? Please choose the profile you want to use amplify
    Adding backend environment prod to AWS Amplify Console app: dqsqjwayqt68m
    ⠴ Initializing project in the cloud...
    
    CREATE_IN_PROGRESS amplify-awsserverlessecommer-prod-10048 AWS::CloudFormation::Stack Wed Feb 26 2020 01:00:49 GMT+0000 (Coordinated Universal Time) User Initiated             
    CREATE_IN_PROGRESS UnauthRole                              AWS::IAM::Role             Wed Feb 26 2020 01:00:52 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS DeploymentBucket                        AWS::S3::Bucket            Wed Feb 26 2020 01:00:52 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS AuthRole                                AWS::IAM::Role             Wed Feb 26 2020 01:00:52 GMT+0000 (Coordinated Universal Time)                            
    CREATE_IN_PROGRESS UnauthRole                              AWS::IAM::Role             Wed Feb 26 2020 01:00:53 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    CREATE_IN_PROGRESS AuthRole                                AWS::IAM::Role             Wed Feb 26 2020 01:00:54 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠦ Initializing project in the cloud...
    
    CREATE_IN_PROGRESS DeploymentBucket AWS::S3::Bucket Wed Feb 26 2020 01:00:54 GMT+0000 (Coordinated Universal Time) Resource creation Initiated
    ⠹ Initializing project in the cloud...
    
    CREATE_COMPLETE UnauthRole AWS::IAM::Role Wed Feb 26 2020 01:01:09 GMT+0000 (Coordinated Universal Time) 
    ⠼ Initializing project in the cloud...
    
    CREATE_COMPLETE AuthRole AWS::IAM::Role Wed Feb 26 2020 01:01:10 GMT+0000 (Coordinated Universal Time) 
    ⠧ Initializing project in the cloud...
    
    CREATE_COMPLETE DeploymentBucket                        AWS::S3::Bucket            Wed Feb 26 2020 01:01:15 GMT+0000 (Coordinated Universal Time) 
    CREATE_COMPLETE amplify-awsserverlessecommer-prod-10048 AWS::CloudFormation::Stack Wed Feb 26 2020 01:01:17 GMT+0000 (Coordinated Universal Time) 
    ✔ Successfully created initial AWS cloud resources for deployments.
    ✔ Initialized provider successfully.
    Initialized your environment successfully.
    
    Your project has been successfully initialized and connected to the cloud!
    
    Some next steps:
    "amplify status" will show you what you've added already and if it's locally configured or deployed
    "amplify add <category>" will allow you to add features like user login or a backend API
    "amplify push" will build all your local backend resources and provision it in the cloud
    “amplify console” to open the Amplify Console and view your project status
    "amplify publish" will build all your local backend and frontend resources (if you have hosting category added) and provision it in the cloud
    
    Pro tip:
    Try "amplify add api" to create a backend API and then "amplify publish" to deploy everything
    
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $
    
    ```

3. 새로운 환경이 생성되고 나서 현재 환경을 확인한다. 새롭게 생성된 환경으로 변경된것을 확인 할 수 있다.

    ```

    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $ amplify status

    Current Environment: prod
    
    | Category | Resource name | Operation | Provider plugin |
    | -------- | ------------- | --------- | --------------- |
    
    
    heejonglee:~/environment/aws-serverless-ecommerce-front-store (master) $
    
    ```

4. **amplkify/check team-provider-info.json** 파일을 확인해보면, 새로운 환경이 추가되어 있는 것을 확인 할 수 있다. 

    ```
    heejonglee:~/environment/aws-serverless-ecommerce-front-store/amplify (master) $ cat team-provider-info.json 
    {
        "dev": {
            "awscloudformation": {
                "AuthRoleName": "amplify-awsserverlessecommer-dev-71218-authRole",
                "UnauthRoleArn": "arn:aws:iam::786923391258:role/amplify-awsserverlessecommer-dev-71218-unauthRole",
                "AuthRoleArn": "arn:aws:iam::786923391258:role/amplify-awsserverlessecommer-dev-71218-authRole",
                "Region": "ap-northeast-2",
                "DeploymentBucketName": "amplify-awsserverlessecommer-dev-71218-deployment",
                "UnauthRoleName": "amplify-awsserverlessecommer-dev-71218-unauthRole",
                "StackName": "amplify-awsserverlessecommer-dev-71218",
                "StackId": "arn:aws:cloudformation:ap-northeast-2:786923391258:stack/amplify-awsserverlessecommer-dev-71218/2937e640-579e-11ea-b1c0-0adc0288bd8a",
                "AmplifyAppId": "dqsqjwayqt68m"
            }
        },
        "prod": {
            "awscloudformation": {
                "AuthRoleName": "amplify-awsserverlessecommer-prod-10048-authRole",
                "UnauthRoleArn": "arn:aws:iam::786923391258:role/amplify-awsserverlessecommer-prod-10048-unauthRole",
                "AuthRoleArn": "arn:aws:iam::786923391258:role/amplify-awsserverlessecommer-prod-10048-authRole",
                "Region": "ap-northeast-2",
                "DeploymentBucketName": "amplify-awsserverlessecommer-prod-10048-deployment",
                "UnauthRoleName": "amplify-awsserverlessecommer-prod-10048-unauthRole",
                "StackName": "amplify-awsserverlessecommer-prod-10048",
                "StackId": "arn:aws:cloudformation:ap-northeast-2:786923391258:stack/amplify-awsserverlessecommer-prod-10048/6d9eee10-5833-11ea-b1c0-0adc0288bd8a",
                "AmplifyAppId": "dqsqjwayqt68m"
            }
        }
    }heejonglee:~/environment/aws-serverless-ecommerce-front-store/amplify (master) $
    
    ```
5. Amplify Console 에서 배포되어 있는 애플리케이션으 환경을 변경한다.

    ```
    ..(todo).. 나중에 업데이트..
    ```

6. 명령어를 통해서 환경 리스트를 확인한다. ( **amplify env list** )

    ```
    heejonglee:~/environment/aws-serverless-ecommerce-front-store/amplify (master) $ amplify env list

    | Environments |
    | ------------ |
    | dev          |
    | *prod        |
    
    heejonglee:~/environment/aws-serverless-ecommerce-front-store/amplify (master) $
    
    ```


7. 현재 환경을 다시 **"dev"** 환경으로 변경한다. ( **amplify env checkout <환경이름>** )

    ```
    heejonglee:~/environment/aws-serverless-ecommerce-front-store/amplify (master) $ amplify env checkout dev
    ✔ Initialized provider successfully.
    Initialized your environment successfully.
    heejonglee:~/environment/aws-serverless-ecommerce-front-store/amplify (master) $ amplify status
    
    Current Environment: dev
    
    | Category | Resource name | Operation | Provider plugin |
    | -------- | ------------- | --------- | --------------- |

    heejonglee:~/environment/aws-serverless-ecommerce-front-store/amplify (master) $ 
    
    ```